graph TD
    A[Client Applications] --> B[libpq/JDBC/ODBC]
    B --> C[Postmaster Process]
    
    C --> D[Backend Process]
    C --> E[Background Processes]
    C --> F[Shared Memory]
    
    D --> G[Parser]
    G --> H[Rewriter]
    H --> I[Optimizer]
    I --> J[Executor]
    
    E --> K[Checkpointer]
    E --> L[WAL Writer]
    E --> M[Autovacuum]
    E --> N[Stats Collector]
    E --> O[Archiver]
    
    F --> P[Shared Buffers]
    F --> Q[WAL Buffers]
    F --> R[Lock Manager]
    F --> S[System Catalogs Cache]
    
    J --> P
    J --> Q
    L --> T[WAL Files]
    K --> U[Data Files]
    P --> U
    O --> V[Archive WAL]
    T --> V
    
    classDef client fill:#e1f5fe,stroke:#01579b,stroke-width:2px
    classDef process fill:#f3e5f5,stroke:#4a148c,stroke-width:2px
    classDef query fill:#fff3e0,stroke:#e65100,stroke-width:2px
    classDef background fill:#e8f5e8,stroke:#1b5e20,stroke-width:2px
    classDef memory fill:#fff8e1,stroke:#f57f17,stroke-width:2px
    classDef storage fill:#fce4ec,stroke:#880e4f,stroke-width:2px
    
    class A,B client
    class C,D process
    class G,H,I,J query
    class E,K,L,M,N,O background
    class F,P,Q,R,S memory
    class T,U,V storage
